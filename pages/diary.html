<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Дневник - Мое портфолио</title>
    <link rel="stylesheet" href="../styles/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body class="page">
    <!-- Ссылка-пропуск для доступности -->
    <a href="#main-content" class="skip-link">Перейти к основному содержанию</a>

    <header class="nav">
      <div class="container header-container">
        <div class="header-content">
          <div class="logo">Portfolio</div>
          <h1>София</h1>
        </div>
      </div>
      <nav class="nav-links" aria-label="Основная навигация">
        <a href="../index.html">Главная</a>
        <a href="projects.html">Проекты</a>
        <a href="diary.html" class="active">Дневник</a>
        <a href="contacts.html">Контакты</a>
      </nav>
    </header>

    <main id="main-content" class="main">
      <section class="section">
        <div class="container">
          <h2 class="section-title">МОЙ УЧЕБНЫЙ ПРОГРЕСС</h2>

          <div class="diary-content">
            <div class="timeline">
              <article class="timeline-item completed">
                <div class="timeline-date">01 дек</div>
                <div class="timeline-content">
                  <h4>Верстка макета сайта</h4>
                  <span class="status completed">✓ Завершено</span>
                  <p>
                    Создание адаптивного макета с использованием CSS Grid и
                    Flexbox
                  </p>
                </div>
              </article>
              <article class="timeline-item completed">
                <div class="timeline-date">05 дек</div>
                <div class="timeline-content">
                  <h4>JavaScript основы</h4>
                  <span class="status completed">✓ Завершено</span>
                  <p>
                    Изучение основных концепций JavaScript: переменные, функции,
                    DOM
                  </p>
                </div>
              </article>
              <article class="timeline-item in-progress">
                <div class="timeline-date">15 дек</div>
                <div class="timeline-content">
                  <h4>Работа с формами</h4>
                  <span class="status in-progress">In progress</span>
                  <p>Валидация форм, обработка событий, доступность</p>
                </div>
              </article>
              <article class="timeline-item in-progress">
                <div class="timeline-date">20 дек</div>
                <div class="timeline-content">
                  <h4>Адаптивный дизайн</h4>
                  <span class="status in-progress">In progress</span>
                  <p>Media queries, container queries, responsive images</p>
                </div>
              </article>
            </div>

            <div class="courses-progress">
              <h3>Текущие курсы</h3>

              

              <div id="skills-container">
                <div class="course-item">
                  <div class="course-name">
                    <span>Веб-разработка</span>
                    <span>90%</span>
                  </div>
                  <div class="skill-bar">
                    <div class="skill-progress" style="width: 90%"></div>
                  </div>
                </div>
                <div class="course-item">
                  <div class="course-name">
                    <span>JavaScript</span>
                    <span>70%</span>
                  </div>
                  <div class="skill-bar">
                    <div class="skill-progress" style="width: 70%"></div>
                  </div>
                </div>
                <div class="course-item">
                  <div class="course-name">
                    <span>React</span>
                    <span>50%</span>
                  </div>
                  <div class="skill-bar">
                    <div class="skill-progress" style="width: 50%"></div>
                  </div>
                </div>
              </div>

              <div
                id="add-skill-form"
                class="add-skill-form"
                style="display: none"
              >
                <h3>Добавить новый навык</h3>
                <div class="form-group">
                  <label for="skill-name" class="visually-hidden"
                    >Название навыка</label
                  >
                  <input
                    type="text"
                    id="skill-name"
                    placeholder="Название навыка"
                    class="form-input"
                    aria-describedby="skill-name-error"
                  />
                  <span
                    id="skill-name-error"
                    class="error-message visually-hidden"
                    aria-live="polite"
                  ></span>
                </div>
                <div class="form-group">
                  <label for="skill-percent" class="visually-hidden"
                    >Процент освоения</label
                  >
                  <input
                    type="number"
                    id="skill-percent"
                    min="0"
                    max="100"
                    placeholder="Процент освоения"
                    class="form-input"
                    aria-describedby="skill-percent-error"
                  />
                  <span
                    id="skill-percent-error"
                    class="error-message visually-hidden"
                    aria-live="polite"
                  ></span>
                </div>
                <div class="form-actions">
                  <button type="button" id="save-skill" class="btn">
                    Сохранить
                  </button>
                  <button
                    type="button"
                    id="cancel-skill"
                    class="btn btn-outline"
                  >
                    Отмена
                  </button>
                </div>
              </div>

              <button id="add-skill-btn" class="btn btn-outline">
                <i class="fas fa-plus"></i> Добавить навык
              </button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container">
        <p>&copy; 2025. Все права защищены.</p>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const addSkillBtn = document.getElementById("add-skill-btn");
        const addSkillForm = document.getElementById("add-skill-form");
        const saveSkillBtn = document.getElementById("save-skill");
        const cancelSkillBtn = document.getElementById("cancel-skill");
        const skillsContainer = document.getElementById("skills-container");
        const skillNameInput = document.getElementById("skill-name");
        const skillPercentInput = document.getElementById("skill-percent");

        const skillNameError = document.getElementById("skill-name-error");
        const skillPercentError = document.getElementById(
          "skill-percent-error"
        );

        function showError(input, errorElement, message) {
          errorElement.textContent = message;
          errorElement.classList.remove("visually-hidden");
          input.setAttribute("aria-invalid", "true");
          input.classList.add("error");
        }

        function hideError(input, errorElement) {
          errorElement.textContent = "";
          errorElement.classList.add("visually-hidden");
          input.setAttribute("aria-invalid", "false");
          input.classList.remove("error");
        }

        function validateSkillName() {
          const value = skillNameInput.value.trim();
          if (!value) {
            showError(
              skillNameInput,
              skillNameError,
              "Пожалуйста, введите название навыка"
            );
            return false;
          }
          if (value.length < 2) {
            showError(
              skillNameInput,
              skillNameError,
              "Название должно содержать минимум 2 символа"
            );
            return false;
          }
          hideError(skillNameInput, skillNameError);
          return true;
        }

        function validateSkillPercent() {
          const value = parseInt(skillPercentInput.value);
          if (isNaN(value)) {
            showError(
              skillPercentInput,
              skillPercentError,
              "Пожалуйста, введите процент"
            );
            return false;
          }
          if (value < 0 || value > 100) {
            showError(
              skillPercentInput,
              skillPercentError,
              "Процент должен быть от 0 до 100"
            );
            return false;
          }
          hideError(skillPercentInput, skillPercentError);
          return true;
        }

        addSkillBtn.addEventListener("click", function () {
          addSkillForm.style.display = "block";
          addSkillBtn.style.display = "none";
          skillNameInput.focus();
        });

        cancelSkillBtn.addEventListener("click", function () {
          addSkillForm.style.display = "none";
          addSkillBtn.style.display = "block";
          skillNameInput.value = "";
          skillPercentInput.value = "";
          hideError(skillNameInput, skillNameError);
          hideError(skillPercentInput, skillPercentError);
        });

        skillNameInput.addEventListener("blur", validateSkillName);
        skillPercentInput.addEventListener("blur", validateSkillPercent);

        saveSkillBtn.addEventListener("click", function () {
          const isNameValid = validateSkillName();
          const isPercentValid = validateSkillPercent();

          if (!isNameValid || !isPercentValid) {
            const firstError = addSkillForm.querySelector(".error");
            if (firstError) firstError.focus();
            return;
          }

          const skillName = skillNameInput.value.trim();
          const skillPercent = parseInt(skillPercentInput.value);

          const newSkill = document.createElement("div");
          newSkill.className = "course-item";
          newSkill.innerHTML = `
                    <div class="course-name">
                        <span>${skillName}</span>
                        <span>${skillPercent}%</span>
                    </div>
                    <div class="skill-bar">
                        <div class="skill-progress" style="width: ${skillPercent}%"></div>
                    </div>
                `;

          skillsContainer.appendChild(newSkill);

          skillNameInput.value = "";
          skillPercentInput.value = "";
          addSkillForm.style.display = "none";
          addSkillBtn.style.display = "block";

          showNotification("Навык успешно добавлен!");
        });

        function showNotification(message) {
          const notification = document.createElement("div");
          notification.className = "notification";
          notification.textContent = message;
          notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: var(--primary);
                    color: white;
                    padding: 15px 20px;
                    border-radius: 8px;
                    z-index: 10000;
                    animation: slideIn 0.3s ease;
                    max-width: 300px;
                `;

          document.body.appendChild(notification);

          setTimeout(() => {
            notification.style.animation = "slideOut 0.3s ease";
            setTimeout(() => {
              notification.remove();
            }, 300);
          }, 3000);
        }
      });
    </script>
  </body>
</html>
